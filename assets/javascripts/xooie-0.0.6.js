/*
*   Copyright 2012 Comcast
*
*   Licensed under the Apache License, Version 2.0 (the "License");
*   you may not use this file except in compliance with the License.
*   You may obtain a copy of the License at
*
*       http://www.apache.org/licenses/LICENSE-2.0
*
*   Unless required by applicable law or agreed to in writing, software
*   distributed under the License is distributed on an "AS IS" BASIS,
*   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
*   See the License for the specific language governing permissions and
*   limitations under the License.
*/

var $X,Xooie;$X=Xooie=function(e){function r(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}var t={modules:{},addons:{}},n=function(){return!1};return n.config=function(e){var n;for(n in e)e.hasOwnProperty(n)&&(n==="modules"||n=="addons"?r(t[n],e[n]):t[n]=e[n])},n.mapName=function(e,n,r){return typeof t[n][e]=="undefined"?r+e:t[n][e]},e&&n.config(e),n}(Xooie),define("xooie",["jquery"],function(e){var t=Xooie.config,n=Xooie.mapName,r=function(e){new e(this)};return $X=Xooie=function(t){t=e(t);var n=t.find("[data-widget-type]");t.is("[data-widget-type]")&&(n=n.add(t)),n.each(function(){var t=e(this),n,i=t.data("widgetType").split(/\s+/);for(var s=0;s<i.length;s++)n=$X.mapName(i[s],"modules","xooie/"),require([n],r.bind(t))})},Xooie.config=t,Xooie.mapName=n,Xooie}),require(["jquery","xooie"],function(e,t){e(document).ready(function(){t(e(this))})}),define("xooie/stylesheet",["jquery"],function(e){var t=function(t){var n,r;this.element=e("style[id="+t+"]"),this.element.length<=0&&(this.element=e(['<style id="'+t+'">',"/* This is a dynamically generated stylesheet: "+t+" */","</style>"].join("")),this.element.appendTo(e("head")));if(document.styleSheets)for(n=0;n<document.styleSheets.length;n+=1)document.styleSheets[n].ownerNode.getAttribute("id")===t&&(this._index=n)};return t.prototype.get=function(){return document.styleSheets[this._index]},t.prototype.getRule=function(e){e=e.toLowerCase();var t,n;n=this.get().cssRules||this.get().rules;for(t=0;t<n.length;t+=1)if(n[t].selectorText.toLowerCase()===e)return n[t];return!1},t.prototype.addRule=function(e,t){var n=this.getRule(e),r,i,s="";if(!n){for(i in t)s+=i+": "+t[i]+";";this.get().insertRule?(r=this.get().cssRules.length,this.get().insertRule(e+" {"+s+"}",r),n=this.get().cssRules[r]):(r=this.get().rules.length,this.get().addRule(e,s,r),n=this.get().rules[r])}return n},t.prototype.deleteRule=function(e){e=e.toLowerCase();var t,n;n=this.get().cssRules||this.get().rules;for(t=0;t<n.length;t+=1)if(n[t].selectorText.toLowerCase()===e)return this.get().deleteRule?this.get().deleteRule(t):this.get().removeRule(t),!0;return!1},t}),define("xooie/base",["jquery","xooie","xooie/stylesheet"],function(e,t,n){var r=function(i,s){var o,u,a,f,l,c,h,p,d;return o=[],u={},i=i.toLowerCase(),f=i+"Init",l=i+"-instance",a=0,p="is-"+i+"-instantiated",c={},h=new n("Xooie"),d=function(t){this.root=e(t);if(this.root.data(l))return o[this.root.data(l)];a++,o[a]=this,this.root.data(l,a),this.root.attr("id",i+"-"+a),this.options=e.extend({},d.getDefaultOptions(),this.root.data()),this.stylesheet=h,this.cssRules=e.extend({},c);var n,r,u=this;s.apply(this,arguments),this.root.addClass(p);if(this.options.addons){n=this.options.addons.split(" ");for(r=0;r<n.length;r+=1)this.loadAddon(n[r])}this.root.trigger(f)},d.prototype={loadAddon:function(e){var n=this,r=t.mapName(e,"addons","xooie/addons/");typeof this.addons=="undefined"&&(this.addons={});try{require([r],function(e){new e(n)})}catch(i){}},render:function(t,n){var i=t.data("templateLanguage")||r.default_template_language,s=r.render[i](t,n);return s===!1?e("<span>Error rendering template</span>"):s}},e.event.special[f]={add:function(t){var n=e(this).data(l);if(n){var r=e.Event(f);r.data=t.data,t.handler.call(this,r)}}},d.setCSSRules=function(e){var t;for(t in e)c[t]=h.addRule(t,e[t])},d.getDefaultOptions=function(){return u||{}},d.setDefaultOptions=function(t){typeof t!="undefined"&&e.extend(u,t)},d};return r.default_template_language="micro_template",r.render={micro_template:function(t,n){return typeof t.micro_render!="undefined"?e(t.micro_render(n)):!1},mustache:function(t,n){return typeof Mustache!="undefined"&&typeof Mustache.render!="undefined"?e(Mustache.render(t.html(),n)):!1},jsrender:function(t,n){return typeof t.render!="undefined"?e(t.render(n)):!1},underscore:function(t,n){return typeof _!="undefined"&&typeof _.template!="undefined"?e(_.template(t.html())(n).trim()):!1}},r}),define("xooie/carousel",["jquery","xooie/base"],function(e,t){var n=null,r=e(),i=[],s={},o;e(window).on("resize",function(){n&&(clearTimeout(n),n=null),r&&(n=setTimeout(function(){r.trigger("carouselResize")},100))});var u=t("carousel",function(){var t=this,n,i,s,o;this.isScrolling=!1,this.positionUpdaters={item:function(e,n){var r=t.content.children(),i,s,o=t.wrapper.scrollLeft(),u;if(typeof n=="undefined")e>0&&e<=r.length&&(s=Math.round(r.eq(e-1).position().left));else{n=n===-1?-1:1,i=-n;if(!e||typeof e!="number")e=1;u=t.currentItem(i)+n*e,u=Math.max(0,Math.min(r.length-1,u)),s=Math.round(r.eq(u).position().left)}return o+s},px:function(e,n){var r;return typeof n=="undefined"?(r=0,n=1):r=t.wrapper.scrollLeft(),r+n*e}},this.snapMethods={item:function(){var e=t.content.children(),n,r,i,s=t.currentItem();r=e.eq(s).position().left,Math.abs(r)<1?r=r<0?Math.ceil(r):Math.floor(r):r=Math.round(r),r!==0&&s>0&&(i=e.eq(s-1).position().left,Math.abs(i)<1?i=i<0?Math.ceil(i):Math.floor(i):i=Math.round(i),Math.abs(r)<Math.abs(i)?n=r+t.wrapper.scrollLeft():n=i+t.wrapper.scrollLeft(),t.wrapper.animate({scrollLeft:n}))}},this.displayMethods={item:function(e,n){var r,i,s,o,u,a;s=t.content.children(),currentItem=t.currentItem(),u=s.eq(currentItem).position().left+t.wrapper.innerWidth(),o=s.length;for(a=currentItem;a<s.length;a+=1){i=s.eq(a);if(Math.floor(i.position().left)+i.outerWidth()*t.options.visibleThreshold>=u){o=a;break}}r=t.render(n,{current_item:currentItem+1,last_visible_item:o,total_items:s.length}),e.append(r)}},this.content=this.root.find(this.options.contentSelector),this.content.wrap("<div/>"),this.wrapper=this.content.parent(),this.wrapper.addClass("xooie-carousel-wrapper"),this.wrapper.parent().addClass("xooie-carousel-crop"),this.cssRules.heightAdjust=this.stylesheet.addRule("#"+this.root.attr("id")+" .xooie-carousel-crop"),this.content.addClass("xooie-carousel-content"),this.content.children().addClass("xooie-carousel-item"),this.root.find(this.options.controlSelector).on("click",function(n){n.preventDefault(),t.updatePosition(e(this).data("scroll"))}),o=function(){t.snap(),t.root.trigger("carouselScrollComplete")},s=function(){n?n=clearTimeout(n):t.root.removeClass("is-carousel-leftmost is-carousel-rightmost"),n=setTimeout(o,250)},this.wrapper.on("scroll",s),this.root.on({carouselScrollComplete:function(){t.updateDisplay(),t.updateLimits()},carouselInit:this.updateDimensions.bind(this),carouselResize:this.updateDimensions.bind(this)}),this.content.find("img").on("load",this.updateDimensions.bind(this)),r=r.add(this.root)});return u.setDefaultOptions({contentSelector:'[data-role="carousel-content"]',controlSelector:'[data-role="carousel-control"]',displayMode:"none",displaySelector:'[data-role="carousel-display"]',displayTemplateSelector:'[data-role="carousel-display-template"]',snapMode:"none",visibleThreshold:.5}),u.setCSSRules({".xooie-carousel-wrapper":{"overflow-x":"scroll","overflow-y":"hidden"},".xooie-carousel-crop":{"overflow-y":"hidden"},".xooie-carousel-content":{display:"table-cell","white-space":"nowrap","font-size":"0px"},".xooie-carousel-item":{display:"inline-block",zoom:"1","*display":"inline","font-size":"1em"}}),o={currentItem:0,lastItem:0},u.prototype.currentItem=function(e){var t,n=this.content.children(),r,i;typeof e=="undefined"&&(e=1);if(e===1){r=this.content.position().left;for(t=0;t<n.length-1;t++){i=n.eq(t).outerWidth(!0);if(r+this.options.visibleThreshold*i>=0)return t;r+=i}return n.length-1}r=this.content.outerWidth(!0)+this.content.position().left;for(t=n.length-1;t>0;t-=1){i=n.eq(t).outerWidth(!0),r-=i;if(t>0&&r<=this.options.visibleThreshold*i)return t}return 0},u.prototype.getRightLimit=function(){try{var e=this.content.children(":last"),t=e.position();if(t&&typeof t.left!="undefined")return Math.floor(t.left)+e.outerWidth(!0)}catch(n){return}},u.prototype.updateDimensions=function(){var t=this.content.children(),n=0;t.each(function(){var t=e(this);n=Math.max(n,t.outerHeight(!0))}),this.cssRules.heightAdjust.style.height=n+"px",this.updateLimits(),this.updateDisplay(),this.snap(),this.root.trigger("carouselUpdated")},u.prototype.updateLimits=function(){this.root.toggleClass("is-carousel-leftmost",this.wrapper.scrollLeft()===0),this.root.toggleClass("is-carousel-rightmost",this.getRightLimit()<=this.wrapper.innerWidth())},u.prototype.updatePosition=function(e){var t=(e+"").match(/^([+\-]?)(\d+)(.*)$/),n,r=this;if(!t)return;n=function(){var e,n,s,o;t[1]!==""&&(e=t[1]==="-"?-1:1),n=parseInt(t[2],10),s=t[3],s===""&&(s="px"),typeof r.positionUpdaters[s]=="function"?o=r.positionUpdaters[s](n,e):o=0,r.isScrolling=!0,r.root.trigger("carouselMove",o),r.wrapper.animate({scrollLeft:o},function(){r.isScrolling=!1,i.length>0&&i.shift()()})},this.isScrolling?i.push(n):n()},u.prototype.updateDisplay=function(){if(this.options.displayMode==="none")return;var e=this.root.find(this.options.displaySelector),t=this.root.find(this.options.displayTemplateSelector);if(e.length===0||t.length===0)return;e.html(""),typeof this.displayMethods[this.options.displayMode]=="function"&&this.displayMethods[this.options.displayMode](e,t)},u.prototype.snap=function(){this.getRightLimit()>this.wrapper.innerWidth()&&typeof this.snapMethods[this.options.snapMode]=="function"&&this.snapMethods[this.options.snapMode]()},u}),define("xooie/dropdown",["jquery","xooie/base"],function(e,t){var n=function(e){return typeof e=="string"?(e=e.split(","),e.map(function(e){return parseInt(e,10)})):typeof e=="number"?[e]:e},r=t("dropdown",function(){var t=this,n=t.getHandle(),r=t.getExpander();this.handlers={off:function(n){if(typeof n.data.not!="undefined"&&(e(n.data.not).is(e(this))||e(n.target).parents(n.data.not).length>0)||typeof n.data.which!="undefined"&&n.data.which.indexOf(n.which)===-1||(e(n.target).is(t.getExpander(n.data.index))||e(n.target).parents(t.options.dropdownExpanderSelector).length>0)&&!e(n.target).is(e(this)))return!0;n.preventDefault(),t.collapse(n.data.index,n.data)},on:function(n){var r=n.data.index||parseInt(e(this).attr("data-dropdown-index"),10),i=n.data.delay,s=e(this);if(typeof n.data.not!="undefined"&&(e(n.data.not).is(e(this))||e(n.target).parents(n.data.not).length>0)||typeof n.data.which!="undefined"&&n.data.which.indexOf(n.which)===-1)return!0;n.preventDefault(),t.expand(r,n.data)}},this.timers={expand:[],collapse:[],throttle:[]},this.addHandlers("on"),this.root.on({dropdownExpand:function(n,r){t.removeHandlers("on",r),t.addHandlers("off",r),e(this).attr("aria-selected",!0),t.getExpander(r).attr("aria-hidden",!1)},dropdownCollapse:function(n,r){t.removeHandlers("off",r),t.addHandlers("on",r),e(this).attr("aria-selected",!1),t.getExpander(r).attr("aria-hidden",!0)}},this.options.dropdownHandleSelector),n.each(function(t){var n=e(this),i=r.eq(t);n.attr({"data-dropdown-index":t,"aria-selected":!1}),i.attr({"data-dropdown-index":t,"aria-hidden":!0})}),r.on("mouseover focus",function(){var n=parseInt(e(this).attr("data-dropdown-index"),10);t.timers.collapse[n]&&(t.timers.collapse[n]=clearTimeout(t.timers.collapse[n]),e(this).on("mouseleave blur",{index:n},function(n){t.collapse(n.data.index,0),e(this).unbind(n)}))})});return r.setDefaultOptions({dropdownHandleSelector:'[data-role="dropdown-handle"]',dropdownExpanderSelector:'[data-role="dropdown-content"]',activeDropdownClass:"is-dropdown-active",throttleDelay:300,triggers:{on:{focus:{delay:0}},off:{blur:{delay:0}}}}),r.prototype.getTriggerHandle=function(t,n){var r=this.getHandle(n);return t.selector?t.selector==="document"?e(document):e(t.selector):r},r.prototype.addHandlers=function(t,r){var i,s,o,u;o=this.options.triggers[t];for(i in o)typeof o[i].which!="undefined"&&(o[i].which=n(o[i].which)),u=[i,t,"count"].join("-"),s=this.getTriggerHandle(o[i],r),s.data(u,s.data(u)+1||1),s.on(i,e.extend({delay:0,index:r},o[i]),this.handlers[t])},r.prototype.removeHandlers=function(e,t){var n,r,i,s,o;i=this.options.triggers[e];for(n in i)r=this.getTriggerHandle(i[n],t),s=[n,e,"count"].join("-"),o=r.data(s)-1,o<=0?(r.unbind(n,this.handlers[e]),r.data(s,0)):r.data(s,o)},r.prototype.getHandle=function(e){var t=this.root.find(this.options.dropdownHandleSelector);return typeof e!="undefined"&&e>=0?t.eq(e):t},r.prototype.getExpander=function(e){var t=this.root.find(this.options.dropdownExpanderSelector);return typeof e!="undefined"&&e>=0?t.eq(e):t},r.prototype.setState=function(e,t,n){if(typeof e=="undefined"||isNaN(e))return;var r=n?"expand":"collapse",i=n?"collapse":"expand",s=t.delay;this.timers[i][e]=clearTimeout(this.timers[i][e]);if(this.timers.throttle[e]||this.timers[r][e])return;this.timers[r][e]=setTimeout(function(e,t,n,r){var i=this.getExpander(e),s=this.getHandle(e),o=this;this.timers[t][e]=clearTimeout(this.timers[t][e]),i.toggleClass(this.options.activeDropdownClass,n),this.getHandle(e).toggleClass(this.options.activeDropdownClass,n),n?(s.trigger("dropdownExpand",[e,r]),this.setFocus(i)):s.trigger("dropdownCollapse",[e,r]),this.options.throttleDelay>0&&(this.timers.throttle[e]=setTimeout(function(){o.timers.throttle[e]=clearTimeout(o.timers.throttle[e])},this.options.throttleDelay))}.bind(this,e,r,n,t),s)},r.prototype.expand=function(e,t){this.getHandle(e).hasClass(this.options.activeDropdownClass)||this.setState(e,t,!0)},r.prototype.collapse=function(e,t){this.getHandle(e).hasClass(this.options.activeDropdownClass)&&this.setState(e,t,!1)},r.prototype.setFocus=function(e){e.find("a,input,textarea,button,select,iframe,[tabindex][tabindex!=-1]").first().focus()},r}),define("xooie/tab",["jquery","xooie/base"],function(e,t){var n=t("tab",function(){var t=this;this.root.on("click","[data-tab-control]",function(n){n.preventDefault(),t.switchToTab(e(this).data("tab-index"))}),this.createTabs()});return n.setDefaultOptions({panelSelector:'[data-role="tab-panel"]',stripSelector:'[data-role="tab-strip"]',controlSelector:'[data-role="tab-selector"]',controlButtonSelector:"[data-tab-control]",tabTemplateSelector:'[data-role="tab-template"]',activeTabClass:"is-tab-active"}),e.extend(n.prototype,{switchToTab:function(t){if(t!==this._currentTab&&t>=0&&t<this.getPanel().length){var n=e.Event("tabChange");n.fromTab=this._currentTab,n.toTab=t,this.getPanel(this._currentTab).removeClass(this.options.activeTabClass),this.getTab(this._currentTab).removeClass(this.options.activeTabClass),this.getPanel(t).addClass(this.options.activeTabClass),this.getTab(t).addClass(this.options.activeTabClass),this._currentTab=t,this.root.trigger(n)}},getPanel:function(e){var t=this.root.find(this.options.panelSelector);return typeof e=="undefined"?t:t.eq(e)},getTab:function(e){var t=this.root.find(this.options.controlSelector);return typeof e=="undefined"?t:t.eq(e)},createTabs:function(){var e=this.root.find(this.options.stripSelector),t=this.root.find(this.options.tabTemplateSelector),n=this.getPanel(),r,i,s,o=0;this.getTab().remove();for(r=0;r<n.length;r++)e.length>0&&t.length>0&&(i=this.render(t,{panel_label:n.eq(r).attr("data-tab-label"),panel_index:r,panel_has_next:r<n.length-1}),i.is(this.options.controlButtonSelector)?s=i:s=i.find(this.options.controlButtonSelector),s.data("tab-index",r),e.append(i)),n.eq(r).hasClass(this.options.activeTabClass)&&(o=r);this.switchToTab(o)}}),n}),define("xooie/addons/base",["jquery"],function(e){var t=function(t,n){var r={},i=t.toLowerCase()+"AddonInit",s="has-"+t.toLowerCase()+"-addon",o=function(r){if(typeof r=="undefined")return!1;if(r.addons&&typeof r.addons[t]!="undefined")return r.addons[t];this.module=r,this.module.addons[t]=this,this.options=e.extend({},o.getDefaultOptions(),this.module.options),this.module.root.addClass(s),n.apply(this,arguments),this.module.root.trigger(i)};return o.getDefaultOptions=function(){return r},o.setDefaultOptions=function(t){typeof t!="undefined"&&e.extend(r,t)},o};return t}),define("xooie/addons/carousel_lentils",["jquery","xooie/addons/base"],function(e,t){var n=t("lentils",function(){var e=this;this.lentilBuilders={item:function(t,n){var r=e.module.content.children(),i,s;for(s=0;s<r.length;s+=1)i=e.module.render(n,{number:s+1,scroll_mode:"item",lentil_is_last:s===r.length-1}),t.append(i)},page:function(t,n){if(typeof e.module.addons.pagination=="undefined")return;var r,i;for(i=0;i<e.module.addons.pagination._breaks.length;i+=1)r=e.module.render(n,{number:i+1,scroll_mode:"page",lentil_is_last:i===e.module.addons.pagination._breaks.length-1}),t.append(r)}},this.module.root.addClass("is-carousel-lentiled"),this.module.root.on("carouselUpdated",function(){e.updateLentils()}),this.module.root.on("carouselScrollComplete",function(){e.currentLentil()}),this.updateLentils(),this.currentLentil()});return n.setDefaultOptions({lentilMode:"item",lentilSelector:'[data-role="carousel-lentils"]',lentilTemplateSelector:'[data-role="carousel-lentils-template"]',activeLentilClass:"is-active-lentil"}),n.prototype.currentLentil=function(){var e=this.module.root.find(this.options.lentilSelector),t=e.children(),n;this.options.lentilMode==="page"&&typeof this.module.addons.pagination!="undefined"?n=this.module.addons.pagination.currentPage():n=this.module.currentItem(),t.filter("."+this.options.activeLentilClass).removeClass(this.options.activeLentilClass),t.eq(n).addClass(this.options.activeLentilClass)},n.prototype.updateLentils=function(){var t=this.module.root.find(this.options.lentilSelector),n=this.module.root.find(this.options.lentilTemplateSelector),r=this;t.length>0&&n.length>0&&(t.html(""),typeof this.lentilBuilders[this.options.lentilMode]=="function"&&(this.lentilBuilders[this.options.lentilMode](t,n),t.children().on("click",function(t){t.preventDefault(),r.module.updatePosition(e(this).data("scroll"))}),this.currentLentil()))},n}),define("xooie/addons/carousel_pagination",["jquery","xooie/addons/base"],function(e,t){var n=t("pagination",function(){var t=this;this._breaks=[],this.module.positionUpdaters=e.extend({},this.module.positionUpdaters,{page:function(e,n){var r=t.module.content.children(),i=1,s=0,o=t.module.wrapper.scrollLeft(),u;if(typeof n=="undefined")e>0&&e<=t._breaks.length&&(s=Math.round(r.eq(t._breaks[e-1]).position().left));else{n=n===-1?-1:1,i=-n;if(!e||typeof e!="number")e=1;u=t.currentPage(i)+n*e,u=Math.max(0,Math.min(t._breaks.length-1,u)),s=Math.round(r.eq(t._breaks[u]).position().left)}return o+s}}),this.module.snapMethods=e.extend({},this.module.snapMethods,{page:function(){var e=t.module.content.children(),n,r,i,s=t.currentPage();r=e.eq(t._breaks[s]).position().left,Math.abs(r)<1?r=r<0?Math.ceil(r):Math.floor(r):r=Math.round(r),r!==0&&s>0&&(i=e.eq(t._breaks[s-1]).position().left,Math.abs(i)<1?i=i<0?Math.ceil(i):Math.floor(i):i=Math.round(i),Math.abs(r)<Math.abs(i)?n=r+t.module.wrapper.scrollLeft():n=i+t.module.wrapper.scrollLeft(),t.module.wrapper.animate({scrollLeft:n}))}}),this.module.displayMethods=e.extend({},this.module.displayMethods,{page:function(e,n){var r=t.module.render(n,{current_page:t.currentPage()+1,total_pages:t._breaks.length});e.append(r)}}),this.module.root.on("carouselUpdated",function(){t.updateBreaks()}),this.updateBreaks()});return n.prototype.currentPage=function(e){var t,n,r=this.module.content.children(),i,s,o;typeof e=="undefined"&&(e=1);if(e===1){i=this.module.content.position().left;for(t=0;t<this._breaks.length;t+=1){s=0,o=t===this._breaks.length-1?r.length:this._breaks[t+1];for(n=this._breaks[t];n<o;n+=1)s+=r.eq(n).outerWidth(!0);if(i+this.module.options.visibleThreshold*s>=0)return t;i+=s}return r.length-1}i=this.module.content.outerWidth(!0)+this.module.content.position().left;for(t=this._breaks.length-1;t>=0;t--){s=0,o=t===this._breaks.length-1?r.length:this._breaks[t+1];for(n=this._breaks[t];n<o;n+=1)s+=r.eq(n).outerWidth(!0);i-=s;if(i<=this.module.options.visibleThreshold*s)return t}return 0},n.prototype.updateBreaks=function(){var t=this.module.content.children(),n=0,r=this.module.wrapper.innerWidth(),i=[0];t.each(function(t){var s=e(this),o=s.outerWidth(!0);n+=o,n>r&&n-(o-s.innerWidth())>r&&(n=o,i.push(t))}),this.module.root.toggleClass("is-carousel-paginated",i.length>1),this._breaks=i,this.module.updateDisplay()},n}),define("xooie/addons/dropdown_accordion",["jquery","xooie/addons/base"],function(e,t){var n=t("accordion",function(){var t=this;this.module.getHandle().on("dropdownExpand",function(n){var r=t.module.getHandle().not(e(this)).filter("."+t.module.options.activeDropdownClass),i=0,s;for(;i<r.length;i+=1)s=parseInt(e(r[i]).attr("data-dropdown-index"),10),t.module.collapse(s,0)})});return n}),define("xooie/addons/tab_automation",["jquery","xooie/addons/base"],function(e,t){var n=function(e,t,n,r){var i=Math.min(e,n)-e||Math.max(t,n)-t,s=r?Math.max(Math.abs(i),1):1;return i/s},r=t("automation",function(){var e=this,t={},n;this._tabChangeTimer=0,this._canRotate=!0,n=function(n,r){var i;t[n]=r;if(r)for(i in t)r=r&&t[i];e._canRotate=r},this.module.root.on({mouseenter:function(){n("mouse",!1),e.stop()},focus:function(){n("keyboard",!1),e.stop()},mouseleave:function(){n("mouse",!0),e.start()},blur:function(){n("mouse",!0),e.start()},tabChange:function(){e.start()}}),this.module.root.find("*").on({focus:function(){n("keyboard",!1),e.stop()},blur:function(){n("keyboard",!0),e.start()}}),this.start()});return r.setDefaultOptions({direction:1,delay:1e4}),e.extend(r.prototype,{start:function(){var t=this;this._tabChangeTimer&&this.stop(),this._tabChangeTimer=setTimeout(function(){t.stop();if(!t._canRotate)return;if(t.outOfRange()){e(window).on("scroll",function(n){t.outOfRange()||(t.start(),e(window).off(n))});return}var n;t.module._currentTab+t.options.direction>=t.module.getPanel().length?n=0:t.module._currentTab+t.options.direction<0?n=t.module.getPanel().length-1:n=t.module._currentTab+t.options.direction,t.module.switchToTab(n)},this.options.delay)},stop:function(){this._tabChangeTimer=clearTimeout(this._tabChangeTimer)},outOfRange:function(){var t,r,i,s;return t=e(window).scrollTop(),r=t+e(window).height(),i=this.module.root.offset().top,s=i+this.module.root.outerHeight(!0),!!n(t,r,i,!0)&&!!n(t,r,s,!0)}}),r}),define("xooie/addons/tab_animation",["jquery","xooie/addons/base","async"],function(e,t,n){var r=t("animation",function(){var t=this,n=!1,r=[],i=function(){r.length>0?r.shift()():n=!1};this.module.root.on("tabChange",function(e){r.push(function(){var n;t.options.wrap?e.toTab===0&&e.fromTab===t.module.getPanel().length-1?n=1:e.toTab===t.module.getPanel().length-1&&e.fromTab===0?n=-1:n=e.toTab>e.fromTab?1:-1:n=e.toTab>e.fromTab?1:-1,t.animateToTab(e.toTab,e.fromTab,n,i)}),n||(n=!0,i())});var s=function(n,r){return function(i){n.animate(r,{duration:t.options.duration,easing:t.options.easing,complete:function(){e(this).attr("style",""),i()}})}};this.animationMethods={horizontal:function(e,t,n,r){var i=[];return n.css({overflow:"hidden",height:t.outerHeight(),width:n.width()}),t.css({display:"block",position:"absolute",top:0,left:0,width:t.width(),height:t.height()}),e.css({display:"block",position:"absolute",top:0,left:r===-1?-n.innerWidth():n.innerWidth(),width:e.width(),height:e.height()}),i.push(s(t,{left:r===-1?n.innerWidth():-n.innerWidth()}),s(e,{left:0}),s(n,{height:e.outerHeight()})),i},vertical:function(e,t,n,r){var i=[];return n.css({overflow:"hidden",height:t.outerHeight(),width:n.width()}),t.css({display:"block",position:"absolute",top:0,left:0,width:t.width(),height:t.height()}),e.css({display:"block",position:"absolute",top:r===-1?-n.innerHeight():n.innerHeight(),left:0,width:e.width(),height:e.height()}),i.push(s(t,{top:r===-1?n.innerHeight():-n.innerHeight()}),s(e,{top:0}),s(n,{height:e.outerHeight()})),i},fade:function(e,t,n,r){var i=[];return n.css({overflow:"hidden",height:t.outerHeight(),width:n.width()}),t.css({display:"block",position:"absolute",opacity:1,top:0,left:0,width:t.width(),height:t.height()}),e.css({display:"block",position:"absolute",opacity:0,top:0,left:0,width:e.width(),height:e.height()}),i.push(s(t,{opacity:0}),s(e,{opacity:1}),s(n,{height:e.outerHeight()})),i}}});return r.setDefaultOptions({panelContainerSelector:'[data-role="panel-container"]',animationMode:"horizontal",easing:"linear",duration:500,wrap:!1}),e.extend(r.prototype,{animateToTab:function(e,t,r,i){if(e===t||e<0||e>=this.module.getPanel().length)return;var s=this.module.getPanel(t),o=this.module.getPanel(e),u=s.parents(this.options.panelContainerSelector),a;typeof this.animationMethods[this.options.animationMode]=="function"&&(a=this.animationMethods[this.options.animationMode](o,s,u,r),n.parallel(a,i||function(){}))}}),r})